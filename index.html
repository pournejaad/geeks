<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="main.css" />
    <title>Document</title>
    <style>
      #box {
        width: 100px;
        height: 100px;
        background-color: aqua;
        margin: auto;
        /* vertical-align: middle; */
      }
    </style>
  </head>
  <body>
    <div id="lowerLeft"></div>
    <div id="lowerRight"></div>
    <div id="upperLeft"></div>
    <div id="upperRight"></div>
    <br /><br /><br />
    <button type="button" id="btn">click</button>
    <div id="box"></div>
    <div id="posX">X:</div>

    <div id="posY">Y:</div>

    <div id="dist">Dist:</div>
    <div id="hori"></div>
    <div id="vert"></div>
    <script src="jquery-3.6.0.js"></script>
    <script src="jquery-ui.js"></script>

    <script>
      $(document).ready(function () {
        let startX;
        let startY;
        let endX;
        let endY;
        $("#box").draggable({
          start: function (e, ui) {
            console.log(e);
            console.log(ui);
            startX = ui.position.left;
            startY = ui.position.top;
            console.log(startX);
            console.log(startY);
          },
          drag: function (e, ui) {
            let currentX = ui.position.left;
            let currentY = ui.position.top;
            if (movedRight(startX, currentX)) {
              if (movedDown(startY, currentY)) {
                if (
                  distance(
                    { top: startY, left: startX },
                    { top: currentY, left: currentX }
                  ) > 20
                ) {
                  $("#box").animate(
                    {
                      position: "absolute",
                      marginTop: $(window).height() - $("#box").height(),
                      marginLeft: $(window).width() - $("#box").width(),
                      opacity: "0",
                    },
                    5000
                  );
                }
              }
            }
            $("#posY").html(`Y: ${currentY}`);
            $("#posX").html(`X: ${currentX}`);

            $("#hori").text(currentX - startX);
            $("#vert").text(currentY - startY);
          },
          stop: function (e, ui) {
            endX = ui.position.left;
            endY = ui.position.top;
            console.log(endX);
            console.log(endY);
          },
        });

        $("#btn").click(function () {
          let windowHeight = $(window).height();
          console.log(windowHeight);
          let boxHeight = $("#box").height();
          console.log(boxHeight);
          let desiredBottom = 400;

          let newPos = windowHeight - (boxHeight + desiredBottom);
          console.log(newPos);
          $("#box").animate({ top: newPos }, 5000, function () {
            $("#box").css({ top: "100px" });
          });
        });
      });
      function distance(pointA, pointB) {
        let xA = Math.abs(pointA.left);
        let yA = Math.abs(pointA.top);
        let xB = Math.abs(pointB.left);
        let yB = Math.abs(pointB.top);
        let yDistance = Math.pow(yB - yA, 2);
        let xDistance = Math.pow(xB - xA, 2);
        let x = Math.sqrt(xDistance + yDistance);

        return x;
      }
      function movedRight(startX, endX) {
        return endX - startX > 0;
      }
      function movedDown(startY, endY) {
        return endY - startY > 0;
      }
    </script>
  </body>
</html>
